var commonWindow=require("ui/iphone/ApplicationWindow"),Data=require("ui/common/DAL"),mapWindow=function(e){function i(){var e,i,t=new commonWindow;Ti.Geolocation.purpose="GPS user coordinates",Ti.Geolocation.getCurrentPosition(function(t){t.error||(e=t.coords.longitude,i=t.coords.latitude)});var o=Ti.Map.createAnnotation({latitude:43.645972,longitude:-79.399079,title:"Appcelerator Headquarters",subtitle:"Mountain View, CA",pincolor:Ti.Map.ANNOTATION_RED,animate:!0,leftButton:Ti.UI.iPhone.SystemButton.INFO_LIGHT,myid:1}),n=Ti.Map.createView({mapType:Ti.Map.STANDARD_TYPE,animate:!0,regionFit:!0,userLocation:!0,annotations:[o]}),a={latitude:i,longitude:e,latitudeDelta:.01,longitudeDelta:.018};return n.setLocation(a),t.addEventListener("open",function(){var t={latitude:i,longitude:e,latitudeDelta:.01,longitudeDelta:.018};n.setLocation(t)}),o.addEventListener("click",function(){}),t.add(n),t}function t(){var i,t,o=new commonWindow;Ti.Geolocation.purpose="GPS user coordinates",Ti.Geolocation.getCurrentPosition(function(e){e.error||(i=e.coords.longitude,t=e.coords.latitude)});var n=Ti.Map.createAnnotation({latitude:e.latitude,longitude:e.longitude,title:e.bar,subtitle:e.location,pincolor:Ti.Map.ANNOTATION_RED,animate:!0,leftButton:Ti.UI.iPhone.SystemButton.INFO_LIGHT,myid:1}),a=Ti.Map.createView({mapType:Ti.Map.STANDARD_TYPE,animate:!0,regionFit:!0,userLocation:!0,annotations:[n]}),r={latitude:t,longitude:i,latitudeDelta:.01,longitudeDelta:.018};return a.setLocation(r),o.addEventListener("open",function(){var i={latitude:e.latitude,longitude:e.longitude,latitudeDelta:.01,longitudeDelta:.018};a.setLocation(i)}),n.addEventListener("click",function(){}),o.add(a),o}return mapwin=e?new t:new i};module.exports=mapWindow;